generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id String @id
  email String @unique
  name String
  cong Int

  @@map("usuarios")
}

model Semana {
  id String @id @default(uuid())
  semana String @unique
  diaReuniao String @map("dia_reuniao")
  canticoInicial String @map("cantico_inicial")
  canticoMeio String @map("cantico_meio")
  canticoFinal String @map("cantico_final")
  capitulos String
  partes Parte[]
  designacao Designacao[]

  @@map("semana")
}

model Parte {
  id String @id @default(uuid())
  semana String @map("semana")
  semanaReference Semana @relation(fields: [semana], references: [semana], onDelete: Cascade, onUpdate: Cascade)
  secao Secao?
  nome String
  tempo String?
  designacao Designacao?

  @@map("partes")
}

model Designacao {
  id String @id @default(uuid())
  semana String @map("semana")
  semanaReference Semana @relation(fields: [semana], references: [semana], onDelete: Cascade, onUpdate: Cascade)
  parte String @unique
  parteId Parte? @relation(fields: [parte], references: [id])
  participante String

  @@map("designacoes")
}

enum Secao {
  tesouros
  ministerio
  vida
}